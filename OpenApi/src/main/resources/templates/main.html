<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>공공데이터 - 미세먼지 정보 조회</title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  
  <!-- 해더 -->
  <header>
    <section></section>
    <section>
      <h1>공공데이터 - 미세먼지 정보 조회</h1>
    </section>
    <section></section>
  </header>

  <main>

    <!-- 좌측담장 -->
    <section class="side-left">
      <span>배고프다</span>
      <table border="1">
        <thead>
          <tr>
            <th>#</th>
            <th>이름</th>
            <th>☆☆☆☆☆</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>제육볶음</td>
            <td>5</td>
          </tr>
          <tr>
            <td>2</td>
            <td>볶음밥</td>
            <td>3</td>
          </tr>
          <tr>
            <td>3</td>
            <td>짜장면</td>
            <td>4</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section>
      <pre>
        인코딩 버전 서비스키 (브라우저, JS, a태그, postman(CURL) // -> 주소형태의 요청)
        DRX%2B9starwalkin%3D%3D
  
        디코딩 버전 서비스키 (서버(java) // -> 자동으로 인코딩되기때문에 인코딩 이전 문자로 보내주어야 함)
        DRX+9starwalkin==
      </pre>

      <h3>JS를 이용한 공공데이터 조회</h3>

      <div class="dustSearch-div">
        <div>
          <select name="sidoName" id="sidoName">
            <option value="서울">서울</option>
            <option value="인천">인천</option>
            <option value="대구">대구</option>
            <option value="부산">부산</option>
            <option value="제주">제주</option>
          </select>
          <div id="dustSearch">조회</div>
        </div>
        <table>
          <thead>
            <tr>
              <th>목록</th>
              <th>수치</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td rowspan="3">미세먼지</td>
              <td class="resultTd"></td>
            </tr>
            <tr>
              <td class="resultTd"></td>
            </tr>
            <tr>
              <td class="resultTd"></td>
            </tr>
            <tr>
              <td rowspan="3">초미세먼지</td>
              <td class="resultTd"></td>
            </tr>
            <tr>
              <td class="resultTd"></td>
            </tr>
            <tr>
              <td class="resultTd"></td>
            </tr>
          </tbody>
        </table>
      </div>

      <hr>
      <pre>
        async : 비동기 요청 코드가 포함된 함수에 작성하는 키워드
        - 이 키워드가 붙은 함수는 항상 Promise 객체를 반환함
          (Promise : 비동기 데이터가 돌아올 것을 양속하는 객체)
        - async가 포함된 함수에서 명시적으로 Promise 객체 반환구문을 작성하지 않을 경우
          자동으로 Promise.resolve() 형태로 반환된다.
          (약속했던 결과가 돌아옴 == Promise.resolve())
          (fetch API에서 첫 번째 then에 사용되는 매개변수 response)
  
      await : 비동기 요청을 동기식 요청으로 변환
        - async가 작성된 함수 내에서만 사용 가능
        - await 키워드가 붙은 함수가 종료될 때 까지 코드해석을 일시중지
          (동기식)
        - AJAX요청, 데이터파싱
      </pre>


      <hr>

      <h3>JAVA를 이용한 공공데이터 조회</h3>

      <section>
        <div>
          시도 이름 : 
          <select id="cityName2">
            <option>서울</option>
            <option>부산</option>
            <option>대구</option>
            <option>인천</option>
            <option>광주</option>
            <option>대전</option>
            <option>울산</option>
            <option>경기</option>
            <option>강원</option>
            <option>충북</option>
            <option>충남</option>
            <option>전북</option>
            <option>전남</option>
            <option>경북</option>
            <option>경남</option>
            <option>제주</option>
            <option>세종</option>
          </select>
          <button id="selectBtn2">조회</button>
        </div>
        
        <div class="result-container">
          <!-- 미세먼지 -->
          <div class="result-row">
            <div th:text="${pm10Grade}">미세먼지 등급</div>
            <div th:text="${pm10GradeText}">좋음/나쁨</div>
            <div th:text="${pm10Value}">미세먼지 농도</div>
          </div>
      
          <!-- 초미세먼지 -->
          <div class="result-row">
            <div th:text="${pm25Grade}">초미세먼지 등급</div>
            <div th:text="${pm25GradeText}">좋음/나쁨</div>
            <div th:text="${pm25Value}">초미세먼지 농도</div>
          </div>
        </div>
      </section>


    </section>

    <!-- 우측담장 -->
    <section>
      <p>점심매뉴</p>
      <p>우리는 왜 1시에 먹는거야</p>
    </section>
  </main>

  <!-- 푸터 -->
  <footer>

  </footer>

  <script src="/js/main.js"></script>
</body>
</html>